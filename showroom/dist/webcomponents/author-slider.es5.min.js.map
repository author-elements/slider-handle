{"version":3,"file":"author-slider.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        readonly: true,\n        default: 'x'\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generatePositionObject: (position = this.PRIVATE.position) => {\n        let { dimensions } = this.PRIVATE\n\n        return {\n          x: {\n            px: position.x,\n            pct: this.UTIL.getPercentageDecimal(position.x, dimensions.width)\n          },\n\n          y: {\n            px: position.y,\n            pct: this.UTIL.getPercentageDecimal(position.y, dimensions.height)\n          }\n        }\n      },\n\n      getRelativePosition: evt => {\n        let { top, left, width, height } = this.PRIVATE.dimensions\n\n        return {\n          x: Math.min(Math.max(evt.pageX - left, 0), width),\n          y: Math.min(Math.max(evt.pageY - top, 0), height)\n        }\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if (relative.x !== this.position.x.px || relative.y !== this.position.y.px) {\n          this.PRIVATE.currentPosition = relative\n          this.emit('slide', this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition))\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, pointermoveHandler, pointerupHandler } = this.PRIVATE\n\n        this.PRIVATE.position = currentPosition\n\n        this.emit('change', {\n          previous: this.previousPosition,\n          position: this.position\n        })\n\n        this.PRIVATE.previousPosition = currentPosition\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      },\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: evt => {\n        let previous = this.PRIVATE.position\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { position, pointermoveHandler } = this.PRIVATE\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","UTIL","defineProperties","defaultAxis","private","readonly","default","dimensions","get","_this","getBoundingClientRect","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generatePositionObject","px","pct","getPercentageDecimal","width","height","getRelativePosition","evt","top","left","Math","min","max","pageX","pageY","pointermoveHandler","buttons","document","addEventListener","pointerupHandler","relative","emit","previous","removeEventListener","registerListeners","detail","attribute","oldValue","newValue","split","filter","includes","length","setAttribute","throwError","message","join","pointerdown","AuthorBaseElement","HTMLElement","this","customElements","define"],"mappings":"kxCAAMA,ggBAIGC,KAAKC,iBAAiB,CACzBC,YAAa,CACXC,SAAS,EACTC,UAAU,EACVC,QAAS,KAGXC,WAAY,CACVH,SAAS,EACTC,UAAU,EACVG,IAAK,kBAAMC,EAAKC,0BAGlBC,gBAAiB,CACfP,SAAS,EACTC,UAAU,EACVC,QAAS,CAAC,IAAK,IAAK,MAGtBM,gBAAiB,CACfR,SAAS,EACTE,QAAS,CACPO,EAAG,EACHC,EAAG,IAIPC,SAAU,CACRX,SAAS,EACTE,QAAS,CACPO,EAAG,EACHC,EAAG,IAIPE,iBAAkB,CAChBZ,SAAS,EACTE,QAAS,CACPO,EAAG,EACHC,EAAG,QAKJb,KAAKgB,iBAAiB,CACzBC,KAAMT,EAAKU,QAAQhB,gBAGhBF,KAAKmB,qBAAqB,CAC7BC,uBAAwB,eAACN,yDAAWN,EAAKU,QAAQJ,SACzCR,EAAeE,EAAKU,QAApBZ,iBAEC,CACLM,EAAG,CACDS,GAAIP,EAASF,EACbU,IAAKd,EAAKR,KAAKuB,qBAAqBT,EAASF,EAAGN,EAAWkB,QAG7DX,EAAG,CACDQ,GAAIP,EAASD,EACbS,IAAKd,EAAKR,KAAKuB,qBAAqBT,EAASD,EAAGP,EAAWmB,WAKjEC,oBAAqB,SAAAC,SACgBnB,EAAKU,QAAQZ,WAA1CsB,IAAAA,IAAKC,IAAAA,KAAML,IAAAA,MAAOC,IAAAA,aAEjB,CACLb,EAAGkB,KAAKC,IAAID,KAAKE,IAAIL,EAAIM,MAAQJ,EAAM,GAAIL,GAC3CX,EAAGiB,KAAKC,IAAID,KAAKE,IAAIL,EAAIO,MAAQN,EAAK,GAAIH,KAI9CU,mBAAoB,SAAAR,QACdA,EAAIS,QAAU,IAIlBC,SAASC,iBAAiB,YAAa9B,EAAKU,QAAQqB,sBAEhDC,EAAWhC,EAAKU,QAAQQ,oBAAoBC,GAE5Ca,EAAS5B,IAAMJ,EAAKM,SAASF,EAAES,IAAMmB,EAAS3B,IAAML,EAAKM,SAASD,EAAEQ,OACjEH,QAAQP,gBAAkB6B,IAC1BC,KAAK,QAASjC,EAAKU,QAAQE,uBAAuBZ,EAAKU,QAAQP,qBAIxE4B,iBAAkB,SAAAZ,SACgDnB,EAAKU,QAA/DP,IAAAA,gBAAiBwB,IAAAA,mBAAoBI,IAAAA,mBAEtCrB,QAAQJ,SAAWH,IAEnB8B,KAAK,SAAU,CAClBC,SAAUlC,EAAKO,iBACfD,SAAUN,EAAKM,aAGZI,QAAQH,iBAAmBJ,EAEhC0B,SAASM,oBAAoB,cAAeR,GAC5CE,SAASM,oBAAoB,YAAaJ,QAIzCvC,KAAK4C,uBAAwB,oBACZ,SAAAjB,SACsBA,EAAIkB,OAAtCC,IAAAA,UAAWC,IAAAA,SAAUC,IAAAA,YAEvBA,IAAaD,SAIsBvC,EAAKU,QAAtChB,IAAAA,YAAaQ,IAAAA,uBAEXoC,OACD,WACOE,EAASC,MAAM,KAAKC,OAAO,SAAAjC,UAAQP,EAAgByC,SAASlC,KAE7DmC,gBACFC,aAAa,OAAQnD,GAEnBM,EAAKR,KAAKsD,WAAW,CAC1BC,gCAA0BP,6FAA2FtC,EAAgB8C,KAAK,kBAQpJC,YAAa,SAAA9B,OACPe,EAAWlC,EAAKU,QAAQJ,WACvBI,QAAQJ,SAAWN,EAAKU,QAAQQ,oBAAoBC,SAElBnB,EAAKU,UAAtCJ,WAAUqB,qBAEXM,KAAK,SAAU,CAClBC,SAAUlC,EAAKU,QAAQE,uBAAuBsB,GAC9C5B,SAAUN,EAAKM,WAGjBuB,SAASC,iBAAiB,cAAe9B,EAAKU,QAAQiB,+QAnJ5BuB,kBAAkBC,oEAyJzC,CAAC,6DAIDC,KAAK1C,QAAQE,uBAAuBwC,KAAK1C,QAAQH,0DAIjD6C,KAAK1C,QAAQE,uBAAuBwC,KAAK1C,QAAQJ,sDAI5D+C,eAAeC,OAAO,gBAAiB/D"}