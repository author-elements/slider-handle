{"version":3,"file":"author-slider.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        readonly: true,\n        default: 'x'\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generatePositionObject: (position = this.PRIVATE.position) => {\n        let { dimensions } = this.PRIVATE\n\n        return {\n          x: {\n            px: position.x,\n            pct: this.UTIL.getPercentageDecimal(position.x, dimensions.width)\n          },\n\n          y: {\n            px: position.y,\n            pct: this.UTIL.getPercentageDecimal(position.y, dimensions.height)\n          }\n        }\n      },\n\n      getRelativePosition: evt => {\n        let { top, left, width, height } = this.PRIVATE.dimensions\n\n        return {\n          x: Math.min(Math.max(evt.pageX - left, 0), width),\n          y: Math.min(Math.max(evt.pageY - top, 0), height)\n        }\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if (relative.x !== this.position.x.px || relative.y !== this.position.y.px) {\n          this.PRIVATE.currentPosition = relative\n          this.emit('slide', this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition))\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, pointermoveHandler, pointerupHandler } = this.PRIVATE\n\n        this.PRIVATE.position = currentPosition\n\n        this.emit('change', {\n          previous: this.previousPosition,\n          position: this.position\n        })\n\n        this.PRIVATE.previousPosition = currentPosition\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      },\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: evt => {\n        let previous = this.PRIVATE.position\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { position, pointermoveHandler } = this.PRIVATE\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","AuthorBaseElement","HTMLElement","[object Object]","super","this","UTIL","defineProperties","defaultAxis","private","readonly","default","dimensions","get","getBoundingClientRect","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generatePositionObject","px","pct","getPercentageDecimal","width","height","getRelativePosition","evt","top","left","Math","min","max","pageX","pageY","pointermoveHandler","buttons","document","addEventListener","pointerupHandler","relative","emit","previous","removeEventListener","registerListeners","attribute.change","attribute","oldValue","newValue","detail","split","filter","includes","length","setAttribute","throwError","message","join","pointerdown","observedAttributes","customElements","define"],"mappings":"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"}